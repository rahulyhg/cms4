!function(e){function t(l){if(a[l])return a[l].exports;var i=a[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,l){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=65)}({65:function(e,t,a){e.exports=a(66)},66:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"Helpers",function(){return n});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),n=function(){function e(){l(this,e)}return i(e,null,[{key:"arrayGet",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=void 0;try{l=e[t]}catch(e){return a}return null!==l&&void 0!==l||(l=a),l}},{key:"stringToSlug",value:function(e,t){return t=t||"-",e.toString().toLowerCase().replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a").replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e").replace(/i|í|ì|ỉ|ĩ|ị/gi,"i").replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o").replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u").replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y").replace(/đ/gi,"d").replace(/\s+/g,t).replace(/[^\w\-]+/g,"").replace(/\-\-+/g,t).replace(/^-+/,"").replace(/-+$/,"")}}]),e}(),o=function(){function e(){l(this,e),this.$body=$("body"),this.RULES_GROUP_TEMPLATE_HTML=$("#rules_group_template").html();var t=this;this.$body.on("submit",".form-update-field-group",function(e){var a=JSON.stringify(t.exportRulesToJson()),l=JSON.stringify(t.exportFieldsToJson());$("#custom_fields_rules").html(a).val(a),$("#custom_fields").html(l).val(l)}),$("#custom_fields_rules").length>0&&(this.handleRules(),this.handleFieldGroups())}return i(e,[{key:"handleRules",value:function(){var e=$.parseJSON($("#custom_fields_rules").val()),t=$(this.RULES_GROUP_TEMPLATE_HTML),a=$("#rules_line_group_template").html(),l=$(".line-group-container");this.$body.on("click",".location-add-rule",function(e){e.preventDefault();var i=$(this),n=t.clone();if(i.hasClass("location-add-rule-and"))i.closest(".line-group").append(n);else{var o=$(a);o.append(n),l.append(o)}n.find(".rule-a").trigger("change")}),this.$body.on("change",".rule-a",function(e){e.preventDefault();var t=$(this),a=t.closest(".rule-line");a.find(".rules-b-group select").addClass("hidden"),a.find('.rules-b-group select[data-rel="'+t.val()+'"]').removeClass("hidden")}),this.$body.on("click",".remove-rule-line",function(e){e.preventDefault();var t=$(this),a=t.closest(".rule-line"),l=t.closest(".line-group");l.find(".rule-line").length<2?l.remove():a.remove()}),e.length<1?$(".location-add-rule").trigger("click"):e.forEach(function(e,i){var n=$(a);e.forEach(function(e,a){var l=t.clone();l.find(".rule-a").val(e.name),l.find(".rule-type").val(e.type),l.find('.rule-b:not([data-rel="'+e.name+'"])').addClass("hidden"),l.find('.rule-b[data-rel="'+e.name+'"]').val(e.value),n.append(l)}),l.append(n)})}},{key:"handleFieldGroups",value:function(){var e=$.parseJSON($("#custom_fields").val()),t=[],a=$("#_new-field-source_template").html(),l=$("#_options-repeater_template").html(),i=$("#_options-defaultvalue_template").html(),o=$("#_options-defaultvaluetextarea_template").html(),r=$("#_options-placeholdertext_template").html(),s=$("#_options-wysiwygtoolbar_template").html(),u=$("#_options-selectchoices_template").html(),d=$("#_options-buttonlabel_template").html(),p=$("#_options-rows_template").html(),c=function(e){var t="";switch(e){case"text":case"email":case"password":case"number":t+=i+r;break;case"image":case"file":return"";case"textarea":t+=o+r+p;break;case"wysiwyg":t+=o+s;break;case"select":t+=u+i;break;case"checkbox":case"radio":t+=u;break;case"repeater":t+=l+d}return t},f=function(e){return a.replace(/___options___/gi,c(e||"text"))};this.$body.on("click",".show-item-details",function(e){e.preventDefault();var t=$(this).closest("li");$(this).toggleClass("active"),t.toggleClass("active")}),this.$body.on("click",".btn-close-field",function(e){e.preventDefault();var t=$(this).closest("li");t.toggleClass("active"),t.find("> .field-column .show-item-details").toggleClass("active")}),this.$body.on("click",".btn-add-field",function(e){e.preventDefault();var t=$(this),a=t.closest(".add-new-field").find("> .sortable-wrapper"),l=$(f());a.append(l),l.find(".line[data-option=title] input[type=text]").focus(),function(e,t){e.attr("data-position",e.index()+1)}(l),l.find(".sortable-wrapper").sortable()}),this.$body.on("change",".change-field-type",function(e){e.preventDefault();var t=$(this);t.closest(".item-details").find("> .options").html(c(t.val()))}),this.$body.on("change blur",".line[data-option=slug] input[type=text]",function(e){var t=$(this),a=n.stringToSlug(t.val(),"_");t.closest(".line").closest(".ui-sortable-handle").find("> .field-column .field-slug").text(a),t.val(a)}),this.$body.on("change blur",".line[data-option=type] select",function(e){var t=$(this),a=n.stringToSlug(t.val(),"_");t.closest(".line").closest(".ui-sortable-handle").find("> .field-column .field-type").text(t.find('option[value="'+a+'"]').text()),t.val(a)}),this.$body.on("change blur",".line[data-option=title] input[type=text]",function(e){var t=$(this),a=t.closest(".line"),l=a.find("~ .line[data-option=slug] input[type=text]"),i=t.val();a.closest(".ui-sortable-handle").find("> .field-column .field-label").text(i),l.val()||l.val(n.stringToSlug(i,"_")).trigger("change")}),$("#deleted_items").val(""),this.$body.on("click",".btn-remove",function(e){e.preventDefault();var a=$(this).closest(".ui-sortable-handle"),l=a.parent();t.push(a.data("id")),a.animate({top:-60,left:60,opacity:.3},300,function(){a.remove(),l.find("> li").each(function(e,t){var a=e+1;$(this).attr("data-position",a)})}),$("#deleted_items").val(JSON.stringify(t))}),function e(t,a){a.sortable(),t.forEach(function(t,l){var i=$(f(t.type||"text"));i.data("id",t.id||0),i.find(".line[data-option=type] select").val(n.arrayGet(t,"type","text")),i.find(".line[data-option=title] input").val(n.arrayGet(t,"title","")),i.find(".line[data-option=slug] input").val(n.arrayGet(t,"slug","")),i.find(".line[data-option=instructions] textarea").val(n.arrayGet(t,"instructions","")),i.find(".line[data-option=defaultvalue] input").val(n.arrayGet(t.options,"defaultValue","")),i.find(".line[data-option=defaultvaluetextarea] textarea").val(n.arrayGet(t.options,"defaultValueTextarea","")),i.find(".line[data-option=placeholdertext] input").val(n.arrayGet(t.options,"placeholderText","")),i.find(".line[data-option=wysiwygtoolbar] select").val(n.arrayGet(t.options,"wysiwygToolbar","basic")),i.find(".line[data-option=selectchoices] textarea").val(n.arrayGet(t.options,"selectChoices","")),i.find(".line[data-option=buttonlabel] input").val(n.arrayGet(t.options,"buttonLabel","")),i.find(".line[data-option=rows] input").val(n.arrayGet(t.options,"rows","")),i.find(".field-label").html(n.arrayGet(t,"title","Text")),i.find(".field-slug").html(n.arrayGet(t,"slug","text")),i.find(".field-type").html(n.arrayGet(t,"type","text")),i.removeClass("active"),i.attr("data-position",l+1),e(t.items,i.find(".sortable-wrapper")),a.append(i)})}(e,$(".sortable-wrapper"))}},{key:"exportRulesToJson",value:function(){var e=[];return $(".custom-fields-rules .line-group-container .line-group").each(function(){var t=[];$(this).find(".rule-line").each(function(e,a){var l=$(this),i={name:l.find(".rule-a").val(),type:l.find(".rule-type").val(),value:l.find(".rule-b:not(.hidden)").val()};t.push(i)}),t.length>0&&e.push(t)}),e}},{key:"exportFieldsToJson",value:function(){var e=[];return function e(t,a){t.each(function(t,l){var i={},n=$(this);i.id=n.data("id")||0,i.title=n.find("> .item-details > .line[data-option=title] input[type=text]").val()||null,i.slug=n.find("> .item-details > .line[data-option=slug] input[type=text]").val()||null,i.instructions=n.find("> .item-details > .line[data-option=instructions] textarea").val()||null,i.type=n.find("> .item-details > .line[data-option=type] select").val()||null,i.options={defaultValue:n.find("> .item-details > .options > .line[data-option=defaultvalue] input[type=text]").val()||null,defaultValueTextarea:n.find("> .item-details > .options > .line[data-option=defaultvaluetextarea] textarea").val()||null,placeholderText:n.find("> .item-details > .options > .line[data-option=placeholdertext] input[type=text]").val()||null,wysiwygToolbar:n.find("> .item-details > .options > .line[data-option=wysiwygtoolbar] select").val()||null,selectChoices:n.find("> .item-details > .options > .line[data-option=selectchoices] textarea").val()||null,buttonLabel:n.find("> .item-details > .options > .line[data-option=buttonlabel] input[type=text]").val()||null,rows:n.find("> .item-details > .options > .line[data-option=rows] input[type=number]").val()||null},i.items=[],e(n.find("> .item-details > .options > .line[data-option=repeater] > .col-xs-9 > .add-new-field > .sortable-wrapper > .ui-sortable-handle"),i.items),a.push(i)})}($("#custom_field_group_items > .ui-sortable-handle"),e),e}}]),e}();jQuery(window).load(function(){new o})}});